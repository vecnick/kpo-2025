
# Сборка и запуск

Сборка
```
./gradlew build
```

Запуск
```
java -jar build/libs/bank_system-1.0.0.jar
```
- или через функцию main класса Main


# Команды:

- addAccount - добавить аккаунт

    Дополнительно запрашиваемые параметры:
    - (name): string - имя владельца аккаунта
    - (balance): double - баланс аккаунта
  
- addCategory - добавить категорию

  Дополнительно запрашиваемые параметры:
    - (type): "INCOME" или "OUTCOME" - тип категории (доход или расход)
    - (name): string - название категории

- addOperation - добавить операцию

  Дополнительно запрашиваемые параметры:
    - (type): "INCOME" или "OUTCOME" - тип операции (доход или расход)
    - (bankAccountId): int - id счёта, к которому относится операция (счёт уже должен существовать)
    - (amount): double - сумма операции
    - (date): "yyyy-MM-dd HH:mm:ss" - дата операции
    - (description): String - описание операции
    - (categoryId): int - id категории, к которому относится операция (категория уже должна существовать)
  

- getAccountById - получить аккаунт по id (аккаунт с таким id должен существовать)

    Дополнительно запрашиваемые параметры:
    - (id): int - id счёта

- getCategoryById - получить категорию по id (категория с таким id должна существовать)

  Дополнительно запрашиваемые параметры:
    - (id): int - id категории

- getOperationById - получить операцию по id (операция с таким id должна существовать)

  Дополнительно запрашиваемые параметры:
    - (id): int - id операции


- getAccounts - получить все аккаунты

- getCategories - получить все категории

- getOperations - получить все операции


- removeAccountById - удалить аккаунт по id (аккаунт с таким id должен существовать)

  Дополнительно запрашиваемые параметры:
    - (id): int - id счёта

- removeCategoryById - удалить категорию по id (категория с таким id должна существовать)

  Дополнительно запрашиваемые параметры:
    - (id): int - id категории

- removeOperationById - удалить операцию по id (операция с таким id должна существовать)

  Дополнительно запрашиваемые параметры:
    - (id): int - id операции


- exportAccounts - сохранить все аккаунты в файл

    Дополнительно запрашиваемые параметры:
    - (format): "CSV" или "JSON" или "YAML" - формат файла

- exportCategories - сохранить все категории в файл

    Дополнительно запрашиваемые параметры:
    - (format): "CSV" или "JSON" или "YAML" - формат файла

- exportOperations - сохранить все операции в файл

    Дополнительно запрашиваемые параметры:
    - (format): "CSV" или "JSON" или "YAML" - формат файла


- importAccounts - считать все аккаунты из файла (файл должен существовать)

    Дополнительно запрашиваемые параметры:
    - (filename): string - имя существующего файла с указанием одного из доступных форматов (.csv, .json, .yaml)

- importCategories - считать все категории из файла (файл должен существовать)

  Дополнительно запрашиваемые параметры:
    - (filename): string - имя существующего файла с указанием одного из доступных форматов (.csv, .json, .yaml)

- importOperations - считать все операции из файла (файл должен существовать)

  Дополнительно запрашиваемые параметры:
    - (filename): string - имя существующего файла с указанием одного из доступных форматов (.csv, .json, .yaml)


- recalculateBalance - пересчитать баланс аккаунта по временному интервалу

  Дополнительно запрашиваемые параметры:
    - (bankAccountId): int - id существующего счёта
    - (dateFrom): "yyyy-MM-dd HH:mm:ss" - стартовая дата
    - (dateTo): "yyyy-MM-dd HH:mm:ss" - конечная дата
  
- recalculateBalanceWithTimer - пересчитать баланс аккаунта по временному интервалу с выводом времени вычислений

  Дополнительно запрашиваемые параметры:
    - (bankAccountId): int - id существующего счёта
    - (dateFrom): "yyyy-MM-dd HH:mm:ss" - стартовая дата
    - (dateTo): "yyyy-MM-dd HH:mm:ss" - конечная дата

- groupOperationsByCategoryName - получить операции, сгруппированные по категориям

# Краткое описание основной структуры:

Основными классами являются BankAccount, Category и Operation. Для их создания используются соотвествующиеся фабрики, для хранения - storage, для различных команд над ними - service.

Используемые паттерны:

- Фасад (оборачивает сервисы основных классов для удобной работы: классы facade/BankAccountFacade, facade/CategoryFacade, facade/OperationFacade)

- Комманда (создан класс commands/CommandsExecutor для выполнения метода execute у переданных в него комманд; создан класс commands/RecalculateBalanceCommand в качестве примера одной из комманд, которая пересчитывает баланс пользователя по совершённым им операциям)

- Декоратор (создан абстрактный класс decorators/CommandsExecutorDecorator, который оборачивает CommandsExecutor и имлементируется от его интерфейса; от абстрактного класса был унаследован класс decorators/CommandsExecutorWithTimer, который передаёт управление на настоящий класс CommandsExecutor, но при этом ещё считает время выполнения комманд)

- Шаблонный метод (по нему были написаны абстрактные классы для упрощения и создания скелета для наследников: абстрактные классы decorators/CommandsExecutorDecorator, exporter/Exporter)

- Посетитель (используется для экспорта информации в файлы; из фабрики factories/ExporterFactory пользователь получает нужный тип экспортёра; каждый экспортёр (exporter/ExporterCSV, exporter/ExporterJSON, exporter/ExporterYAML) имеет в себе метод  accept(), который передаёт их самих в главный класс патерна посетителя (visitors/ExportVisitor); главный класс определяет тип объекта, который к нему пришёл, и в зависимости от этого выбирает файл для записи и вызывает у полученного объекта метод export())

- Фабрика (используется для создания основных классов и классов для импорта-экспорта файлов: factories/...)

- Стратегия (используется для импорта информации из файлов; из фабрики factories/ImporterFactory пользователь получает нужный тип импортёра; импортёры (importer/ImporterCSV, importer/ImporterJSON, importer/ImporterYAML) являются классами-стратегиями; importer/ImporterContext получает в себя объект стратегии и вызывает у них метод parse(), который парсит данные из файла.

